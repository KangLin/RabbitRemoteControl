<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>玉兔远程控制: Compiling for Windows</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="app.ico"/></td>
  <td id="projectalign">
   <div id="projectname">玉兔远程控制<span id="projectnumber">&#160;0.1.0-bate4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Compiling for Windows</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md172"></a> Author: Kang Lin <a href="#" onclick="location.href='mai'+'lto:'+'kl2'+'22'+'@12'+'6.'+'com'; return false;">kl222<span class="obfuscator">.nosp@m.</span>@126<span class="obfuscator">.nosp@m.</span>.com</a> <br  />
 Translator: Allan Nordhøy <a href="#" onclick="location.href='mai'+'lto:'+'epo'+'st'+'@an'+'ot'+'her'+'ag'+'enc'+'y.'+'no'; return false;">epost<span class="obfuscator">.nosp@m.</span>@ano<span class="obfuscator">.nosp@m.</span>thera<span class="obfuscator">.nosp@m.</span>genc<span class="obfuscator">.nosp@m.</span>y.no</a></p>
<h2><a class="anchor" id="autotoc_md173"></a>
Environment</h2>
<h3><a class="anchor" id="autotoc_md174"></a>
Operating system</h3>
<pre class="fragment">Windows 10, version 20H2 (19042.985)
</pre> <h3><a class="anchor" id="autotoc_md175"></a>
QtCreator</h3>
<p>Version: v17.0.0 It is recommended to use version v5.0.2 or later. <br  />
 Prior versions don't have CMake support.</p>
<h2><a class="anchor" id="autotoc_md176"></a>
Tools</h2>
<ul>
<li>Compiler<ul>
<li>Visual Studio<ul>
<li>Home<ul>
<li><a href="https://visualstudio.microsoft.com/vs/">https://visualstudio.microsoft.com/vs/</a></li>
<li><a href="http://msdn.microsoft.com/zh-cn/vstudio">http://msdn.microsoft.com/zh-cn/vstudio</a></li>
<li><a href="https://visualstudio.microsoft.com/zh-hans/downloads/">https://visualstudio.microsoft.com/zh-hans/downloads/</a></li>
</ul>
</li>
<li>Version：<ul>
<li>Visual Studio 2013</li>
<li>Visual Studio 2015</li>
<li>Visual Studio 2017</li>
<li>Visual Studio 2019</li>
<li>Visual Studio 2022</li>
</ul>
</li>
<li>Visual Studio Key：https://github.com/KangLin/Documents/blob/master/c/VisualStudioKey.md</li>
<li>Current version：VS 2017</li>
</ul>
</li>
</ul>
</li>
<li>Windows SDK: <a href="https://developer.microsoft.com/en-us/windows/downloads/sdk-archive">https://developer.microsoft.com/en-us/windows/downloads/sdk-archive</a> <br  />
 Install the SDK that corresponds to your operating system. (CDB must be installed, and Qt debugging is required.)</li>
<li>[OPTIONAL] Windows Driver Kit: <a href="https://docs.microsoft.com/zh-cn/windows-hardware/drivers/download-the-wdk">https://docs.microsoft.com/zh-cn/windows-hardware/drivers/download-the-wdk</a></li>
<li>DirectX: <a href="https://support.microsoft.com/zh-cn/topic/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84-directx-d1f5ffa5-dae2-246c-91b1-ee1e973ed8c2">https://support.microsoft.com/zh-cn/topic/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84-directx-d1f5ffa5-dae2-246c-91b1-ee1e973ed8c2</a> <br  />
 Required to run Qt.</li>
<li>Qt<ul>
<li>Qt (official release): <a href="https://download.qt.io/official_releases/qt/">https://download.qt.io/official_releases/qt/</a> <br  />
 Current version: Qt 6.9.2<ul>
<li>Set environment variable or cmake parameters: QT_ROOT, Qt6_DIR or Qt6_DIR<ul>
<li>Environment variable <pre class="fragment">export QT_ROOT=Qt install root
# When Qt6
export Qt6_DIR=$QT_ROOT
# When Qt5
export Qt5_DIR=$QT_ROOT
</pre></li>
<li>CMAKE parameters <pre class="fragment"># Qt6
cmake -DQT_ROOT=[Qt install root] -DQt6_DIR=[Qt install root] ......
# Qt5 
cmake -DQT_ROOT=[Qt install root] -DQt5_DIR=[Qt install root] ......
</pre></li>
</ul>
</li>
</ul>
</li>
<li>IDE: Qt Creator. It is recommended to use version v5.0.2 or later. <br  />
 Current version: 14.0.2 Prior versions don't have CMake support.</li>
</ul>
</li>
<li>Git: <a href="https://www.git-scm.com/">https://www.git-scm.com/</a> <br  />
</li>
<li>CMake: <a href="https://cmake.org/">https://www.cmake.org/</a> Version: 3.27.0</li>
<li>Doxygen: <a href="http://www.doxygen.nl/">http://www.doxygen.nl/</a></li>
<li>Nsis: <a href="https://nsis.sourceforge.io/Download">https://nsis.sourceforge.io/Download</a></li>
<li>vcpkg: <a href="https://github.com/microsoft/vcpkg">https://github.com/microsoft/vcpkg</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md177"></a>
Compilation</h2>
<p>See: <a href="../../.github/workflows/msvc.yml">Compile integration</a></p>
<h2><a class="anchor" id="autotoc_md178"></a>
Library dependencies</h2>
<ul>
<li>[MUST] RabbitCommon: <a href="https://github.com/KangLin/RabbitCommon">https://github.com/KangLin/RabbitCommon</a></li>
<li>[MUST] <a href="https://github.com/openssl/openssl">Openssl:</a> Required to run Qt.</li>
<li>[OPTIONAL] RFB<ul>
<li>[OPTIONAL] RabbitVNC: <a href="https://github.com/KangLin/RabbitVNC">https://github.com/KangLin/RabbitVNC</a></li>
<li>[OPTIONAL] LibVNCServer: <a href="https://github.com/LibVNC/libvncserver">https://github.com/LibVNC/libvncserver</a></li>
<li>[OPTIONAL] TigerVNC: <a href="https://github.com/KangLin/tigervnc">https://github.com/KangLin/tigervnc</a></li>
</ul>
</li>
<li>[OPTIONAL] FreeRDP: <a href="https://github.com/FreeRDP/FreeRDP">https://github.com/FreeRDP/FreeRDP</a></li>
<li>[OPTIONAL] SSH<ul>
<li>libssh:<ul>
<li><a href="https://www.libssh.org">https://www.libssh.org</a></li>
<li><a href="https://api.libssh.org/stable/index.html">libssh API</a></li>
</ul>
</li>
<li>libssh2:<ul>
<li><a href="https://www.libssh2.org/">https://www.libssh2.org/</a> <br  />
</li>
<li><a href="https://github.com/libssh2/libssh2">https://github.com/libssh2/libssh2</a></li>
</ul>
</li>
</ul>
</li>
<li>[OPTIONAL] QTermWidget: <a href="https://github.com/lxqt/qtermwidget">https://github.com/lxqt/qtermwidget</a></li>
<li>[OPTIONAL] QtSsh: <a href="https://github.com/condo4/QtSsh.git">https://github.com/condo4/QtSsh.git</a></li>
<li>[OPTIONAL] <a class="el" href="classQTelnet.html">QTelnet</a>: <a href="https://github.com/silderan/QTelnet.git">https://github.com/silderan/QTelnet.git</a></li>
<li>[OPTIONAL] libtelnet: <a href="https://github.com/seanmiddleditch/libtelnet">https://github.com/seanmiddleditch/libtelnet</a></li>
<li>[OPTIONAL] libdatachannel: <a href="https://github.com/paullouisageneau/libdatachannel">https://github.com/paullouisageneau/libdatachannel</a></li>
<li>[OPTIONAL] QXmpp: <a href="https://github.com/qxmpp-project/qxmpp">https://github.com/qxmpp-project/qxmpp</a></li>
<li>[OPTIONAL] QtService: <a href="https://github.com/KangLin/qt-solutions/">https://github.com/KangLin/qt-solutions/</a></li>
<li>[OPTIONAL] PcapPlusPlus: <a href="https://github.com/seladb/PcapPlusPlus">https://github.com/seladb/PcapPlusPlus</a></li>
<li>[OPTIONAL] FFMPEG: <a href="https://ffmpeg.org/">https://ffmpeg.org/</a> Multimedia capabilities required</li>
<li>[OPTIONAL] qtkeychain: <a href="https://github.com/KangLin/qtkeychain">https://github.com/KangLin/qtkeychain</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md179"></a>
RabbitCommon</h3>
<ul>
<li>This library is placed in the same directory level as the project by default. <pre class="fragment">git clone https://github.com/KangLin/RabbitRemoteControl.git
git clone https://github.com/KangLin/RabbitCommon.git
</pre></li>
<li>If not, you must specify the CMake parameters or environment variable: <pre class="fragment">git clone https://github.com/KangLin/RabbitRemoteControl.git
; Set environment variable
set RabbitCommon_ROOT=[RabbitCommon install root]
cd RabbitRemoteControl
; Or set CMake parameters
cmake -DRabbitCommon_ROOT=[RabbitCommon installation path] ......
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md180"></a>
FreeRDP</h3>
<ul>
<li>Use vcpkg<ul>
<li>Source-code location: <a href="https://github.com/microsoft/vcpkg/">https://github.com/microsoft/vcpkg/</a> <pre class="fragment">git clone https://github.com/microsoft/vcpkg.git
cd vcpkg
bootstrap-vcpkg.bat
vcpkg install freerdp
</pre></li>
<li>Specify the CMake parameters: -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake</li>
<li>With vcpk, the FreeRDP service is not a default feature, so you need to specify it manually.</li>
</ul>
</li>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/FreeRDP/FreeRDP">https://github.com/FreeRDP/FreeRDP</a></li>
<li>Compilation instructions: <a href="https://github.com/FreeRDP/FreeRDP/wiki/Compilation">https://github.com/FreeRDP/FreeRDP/wiki/Compilation</a> <pre class="fragment">  git clone https://github.com/FreeRDP/FreeRDP.git
  cd FreeRDP
  mkdir build
  cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install -DWITH_SERVER=ON
  cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When FreeRDP is compiled from source, the CMake parameter needs to be specified to compile this project:<ul>
<li>-DBUILD_FREERDP=ON</li>
<li>-DFreeRDP-Client_DIR=[freerdp installation path]/lib/cmake/FreeRDP-Client3</li>
<li>-DFreeRDP_DIR=[freerdp installation path]/lib/cmake/FreeRDP3</li>
<li>-DWinPR_DIR=[freerdp installation path]/lib/cmake/WinPR3</li>
<li>-DFreeRDP-Shadow_DIR=[freerdp installation path]/lib/cmake/FreeRDP-Shadow3</li>
<li>-DFreeRDP-Server_DIR=[freerdp installation path]/lib/cmake/FreeRDP-Server3</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md181"></a>
LibVNCServer</h3>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/LibVNC/libvncserver">https://github.com/LibVNC/libvncserver</a> <br  />
 It is recommended to use the patches from: <a href="https://github.com/KangLin/libvncserver">https://github.com/KangLin/libvncserver</a> <pre class="fragment">cd vcpkg
vcpkg install zlib openssl libjpeg-turbo
git clone https://github.com/KangLin/libvncserver.git
cd libvncserver
mkdir build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake
cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When LibVNCServer is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DLibVNCServer_DIR=[LibVNCServer installation path]/lib/cmake/LibVNCServer
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md182"></a>
RabbitVNC</h3>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/KangLin/RabbitVNC">https://github.com/KangLin/RabbitVNC</a> <br  />
 <pre class="fragment">cd vcpkg
vcpkg install zlib openssl libjpeg-turbo pixman
git clone https://github.com/KangLin/RabbitVNC.git
cd RabbitVNC
mkdir build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install -DCMAKE_TOOLCHAIN_FILE=[vcpkg 安装目录]/scripts/buildsystems/vcpkg.cmake
cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When RabbitVNC is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DRabbitVNC_DIR=[RabbitVNC installation path]/lib/cmake/tigervnc
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md183"></a>
TigerVNC</h3>
<ul>
<li>Compile from source code</li>
</ul>
<p>The official program does not support libraries. <br  />
 See: <a href="https://github.com/TigerVNC/tigervnc/issues/1123">https://github.com/TigerVNC/tigervnc/issues/1123</a> <br  />
 The Kanglin fork has support. <br  />
 Source-code location: <a href="https://github.com/KangLin/tigervnc">https://github.com/KangLin/tigervnc</a> <br  />
 </p><pre class="fragment">cd vcpkg
vcpkg install zlib openssl pixman libjpeg-turbo
git clone https://github.com/KangLin/tigervnc.git
cd tigervnc
mkdir build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake
cmake --build . --config Release --target install
</pre><ul>
<li>When TigerVNC is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-Dtigervnc_DIR=[TigerVNC installation path]/lib/cmake/tigervnc
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md184"></a>
libdatachannel</h3>
<ul>
<li>Use vcpkg<ul>
<li>Source-code location: <a href="https://github.com/microsoft/vcpkg/">https://github.com/microsoft/vcpkg/</a> <pre class="fragment">cd vcpkg
vcpkg install libdatachannel
</pre></li>
<li>Specify the CMake parameters: -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake</li>
</ul>
</li>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/paullouisageneau/libdatachannel">https://github.com/paullouisageneau/libdatachannel</a></li>
<li>Compilation instructions: <a href="https://github.com/paullouisageneau/libdatachannel/blob/master/BUILDING.md">https://github.com/paullouisageneau/libdatachannel/blob/master/BUILDING.md</a> <pre class="fragment">git clone https://github.com/paullouisageneau/libdatachannel.git
cd libdatachannel
git submodule update --init --recursive
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install
cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When libdatachannel is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DLibDataChannel_DIR=[libdatachannel installation path]/lib/cmake/LibDataChannel
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md185"></a>
QXmpp</h3>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/qxmpp-project/qxmpp">https://github.com/qxmpp-project/qxmpp</a> <pre class="fragment">git clone https://github.com/qxmpp-project/qxmpp.git
cd qxmpp
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install -DQt5_DIR=[Qt install path]/lib/cmake/Qt5
cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When QXmpp is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DQXmpp_DIR=[QXmpp installation path]/lib/cmake/qxmpp
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md186"></a>
QTermWidget (Not currently supported on Windows)</h3>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/lxqt/qtermwidget">https://github.com/lxqt/qtermwidget</a></li>
</ul>
</li>
<li>When QTermWidget is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-Dqtermwidget5_DIR=[qtermwidget installation path]/lib/cmake/qtermwidget5
</pre></li>
<li>When install, Need to copy resources to install directory <pre class="fragment">IF EXIST "${{env.INSTALL_DIR}}\share\qtermwidget6" (
    xcopy "${{env.INSTALL_DIR}}\share\qtermwidget6" install\share\qtermwidget6 /Y /S /I
)
</pre> Reference: <a href="../../.github/workflows/msvc.yml">msvc.yml</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md187"></a>
libssh</h3>
<ul>
<li>Use vcpkg<ul>
<li>Source-code location: <a href="https://github.com/microsoft/vcpkg/">https://github.com/microsoft/vcpkg/</a> <pre class="fragment">cd vcpkg
vcpkg install libssh
</pre></li>
<li>Specify the CMake parameters: -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake</li>
</ul>
</li>
<li>Compile from source code<ul>
<li>Source code location: <a href="https://www.libssh.org">https://www.libssh.org</a></li>
</ul>
</li>
<li>When libssh is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-Dlibssh_DIR=[libssh installation path]/lib/cmake/libssh
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md188"></a>
QtService</h3>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/KangLin/qt-solutions/">https://github.com/KangLin/qt-solutions/</a> <pre class="fragment">git clone https://github.com/KangLin/qt-solutions.git
cd qt-solutions
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%CD%/install
cmake --build . --config Release --target install
</pre></li>
</ul>
</li>
<li>When QtService is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DQtService_DIR=[QtService installation path]/lib/cmake/QtService
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md189"></a>
PcapPlusPlus</h2>
<ul>
<li>Compile from source code<ul>
<li>Source-code location: <a href="https://github.com/seladb/PcapPlusPlus">https://github.com/seladb/PcapPlusPlus</a> <pre class="fragment">git clone https://github.com/seladb/PcapPlusPlus.git
</pre></li>
<li>Download <code>npcap SDK</code> from <a href="https://npcap.com">npcap</a></li>
<li>Set CMake parameters: <pre class="fragment">-DPCAP_ROOT=[npcap SDK directory] ^
-DPCAPPP_BUILD_TESTS=OFF ^
-DPCAPPP_BUILD_EXAMPLES=OFF
</pre></li>
<li>See: <a href="https://pcapplusplus.github.io/docs/install#build-from-source">https://pcapplusplus.github.io/docs/install#build-from-source</a></li>
</ul>
</li>
<li>Use vcpkg<ul>
<li>Source-code location: <a href="https://github.com/microsoft/vcpkg/">https://github.com/microsoft/vcpkg/</a> <pre class="fragment">git clone https://github.com/microsoft/vcpkg.git
cd vcpkg
vcpkg install pcapplusplus
</pre> <b>Note</b>: PcapPlusPlus in vcpkg relies on WinPcap, but WinPcap does not work in Windows 10. So compile from source, relying on the npcap library.</li>
</ul>
</li>
<li>When PcapPlusPlus is compiled from source, the CMake parameter needs to be specified to compile this project: <pre class="fragment">-DPCAP_ROOT=[npcap SDK directory] ^
-DPacket_ROOT=[npcap SDK directory] ^
-DPcapPlusPlus_DIR=[PcapPlusPlus install path]/lib/cmake/pcapplusplus
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md190"></a>
Compile this project</h2>
<ul>
<li>Project location: <a href="https://github.com/KangLin/RabbitRemoteControl">https://github.com/KangLin/RabbitRemoteControl</a></li>
<li>Download the source code: <pre class="fragment">git clone https://github.com/KangLin/RabbitRemoteControl.git
</pre></li>
<li>The CMake parameters:<ul>
<li>QT_ROOT: Qt install root</li>
<li>Qt6_DIR or Qt5_DIR: Is same QT_ROOT</li>
<li>RabbitCommon_ROOT: RabbitCommon source-code location</li>
<li>BUILD_CLIENT: Compile client. the default is ON</li>
<li>BUILD_SERVICE: Compile service. the default dependency is whether there is a QtService</li>
<li>BUILD_PLUGINS: Compile plugins. the default is ON</li>
<li>BUILD_APP: Compile applaction. the default is ON</li>
<li>BUILD_DOCS: Build docmenets. the default is OFF</li>
<li>BUILD_SHARED_LIBS: Compile shared libraries. the default is ON</li>
<li>BUILD_FREERDP：If compile FreeRDP. the default is OFF</li>
<li>WinPR_DIR: [FreeRDP installation path]/lib/cmake/WinPR2</li>
<li>FreeRDP_DIR: [FreeRDP installation path]/lib/cmake/FreeRDP2</li>
<li>FreeRDP-Client_DIR: [FreeFRP installation path]/lib/cmake/FreeRDP-Client2</li>
<li>BUILD_RABBITVNC: Compile RabbitVNC. the default is ON</li>
<li>RabbitVNC_DIR: [RabbitVNC installation path]/lib/cmake/RabbitVNC</li>
<li>BUILD_TigerVNC: Compile TigerVNC. the default is ON</li>
<li>TigerVNC_DIR: [TigerVNC installation path]/lib/cmake/tigervnc</li>
<li>BUILD_LibVNCServer: Compile LibVNCServer. the default is ON</li>
<li>LibVNCServer_DIR: [libvncserver installation path]/lib/cmake/LibVNCServer</li>
<li>libdatachannel_DIR: [libdatachannel installation path]/lib/cmake/LibDataChannel</li>
<li>QXmpp_DIR=[QXmpp installation path]/lib/cmake/qxmpp</li>
<li>QTermWidget5_DIR: [QTermWidget installation path]/lib/cmake/qtermwidget5</li>
<li>libssh_DIR: [libssh installation path]/lib/cmake/libssh</li>
<li>QtService_DIR: [QtService installation path]/lib/cmake/QtService</li>
</ul>
</li>
<li>If using vcpkg, please set the CMake parameters:<ul>
<li>Because of using vcpkg manifest mode, so the depend libraries in <code>vcpkg.json</code></li>
<li>CMAKE_TOOLCHAIN_FILE: [vcpkg installation path]/scripts/buildsystems/vcpkg.cmake</li>
<li>X_VCPKG_APPLOCAL_DEPS_INSTALL: ON #When installing, copy the dependent libraries to the installation directory</li>
<li>VCPKG_MANIFEST_FEATURES: This variable can be set to a list of features to activate when installing from your manifest. Note: All vcpkg-affecting variables must be defined before the first project() directive such as in a CMakePresets.json's "cacheVariables" map, via the command line, or set() statements. So don't place it in CMakeLists.txt of the project. See: <a href="https://learn.microsoft.com/vcpkg/users/buildsystems/cmake-integration#settings-reference">https://learn.microsoft.com/vcpkg/users/buildsystems/cmake-integration#settings-reference</a></li>
</ul>
</li>
<li>Compile<ul>
<li>Compile from the command-line <pre class="fragment">  cd RabbitRemoteControl
  mkdir build
  cmake .. -DCMAKE_BUILD_TYPE=Release ^
      -DCMAKE_INSTALL_PREFIX=%CD%/install ^
      -DCMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake ^
      -DX_VCPKG_APPLOCAL_DEPS_INSTALL=ON ^
      -DBUILD_FREERDP=ON [options libraries]
  cmake --build . --config Release --target install

  ; Package
  cmake --install . --config Release --component Runtime --strip
  cmake --install . --config Release --component Application --strip
  cmake --install . --config Release --component Plugin --strip
  cmake --install . --config Release --component DependLibraries --strip
  makensis Windows.nsi
</pre></li>
<li>Using an IDE (Qt Creator)<ul>
<li>Set vcpkg: Menu→Edit→Preferences→Kits→Cmake Configuration:<ul>
<li>Add CMAKE_TOOLCHAIN_FILE=[vcpkg installation path]/scripts/buildsystems/vcpkg.cmake</li>
<li>Set X_VCPKG_APPLOCAL_DEPS_INSTALL=ON</li>
</ul>
</li>
<li>Open project: Menu→File→Open File or project, Select the CMakeLists.txt of the project</li>
<li>Configure: Click Project→"Build &amp; Run" in the toolbar on the left to configure CMake parameters<ul>
<li>If need install: select install in target</li>
</ul>
</li>
<li>Compile and run: Click "Start Debugging of startup project" in the left toolbar, or press the shortcut key (F5)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>Note:</b> If the plugin does not load. It may be that the plugin's dependencies are not installed on the system. You can copy the dependency libraries into the application's bin directory.</p>
<p>See: <a href="../../.github/workflows/msvc.yml">Compile integration</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
<a href="mailto:kl222@126.com" >作者：康林 (kl222@126.com) </a>
<p/>
<a href="https://github.com/KangLin/LunarCalendar">版权所有(c) 康林工作室 保留所有权力</a>
</address>
</body>
</html>
