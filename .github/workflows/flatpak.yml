# Author: Kang Lin<kl222@126.com>
name: flatpak

on:
  push:
  pull_request:

jobs:
  build_flatpak:

    # See: [About GitHub-hosted runners](https://docs.github.com/actions/using-github-hosted-runners/about-github-hosted-runners/about-github-hosted-runners)
    # See: [Choosing the runner for a job](https://docs.github.com/actions/writing-workflows/choosing-where-your-workflow-runs/choosing-the-runner-for-a-job)
    # See: https://github.com/actions/runner-images/
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          submodules: recursive

      - name: Flatpak build
        run: |
          sudo apt-get update -y -q
          sudo apt-get install -y -q flatpak flatpak-builder
          sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
          sudo flatpak install -y org.kde.Sdk//6.8 org.kde.Platform//6.8
          flatpak-builder --user --force-clean --install build Package/io.github.KangLin.RabbitRemoteControl.json

